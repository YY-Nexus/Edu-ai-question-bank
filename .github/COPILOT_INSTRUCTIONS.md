# Copilot 指令说明

## 项目概述
本项目是教育AI题库与作业系统，包含完整的前后端实现方案、UI设计以及基础设施配置。项目主要使用Python后端、Vue.js前端，并通过Kubernetes进行部署。

## 代码风格

### Python 代码
- **严格遵循 PEP8 编码规范**
- 使用 4 个空格缩进，不使用制表符
- 行长度限制为 88 字符（Black 格式化工具标准）
- 函数和类名使用下划线命名（snake_case）
- 常量使用全大写字母
- 添加类型注解以提高代码可读性
- 使用 docstring 为函数和类添加文档

### JavaScript/Vue.js 代码
- 遵循 ESLint 配置规则
- 使用 2 个空格缩进
- 组件名使用 PascalCase
- 变量和函数名使用 camelCase
- 使用 ES6+ 语法特性
- 优先使用 Composition API

### Shell 脚本
- **确保脚本兼容 Bash**
- 在脚本开头添加 `#!/bin/bash`
- 使用 `set -e` 确保错误时退出
- 为复杂操作添加注释说明
- 变量使用双引号包围以防止分词

### YAML 配置文件
- 使用 2 个空格缩进
- 保持一致的键值对格式
- 为 Kubernetes 资源添加适当的标签和注解
- 配置文件应包含描述性注释

## 分支管理

### 主分支策略
- **主分支为 `main`**，保持稳定可部署状态
- 禁止直接向 `main` 分支推送代码
- 所有功能开发必须通过分支进行

### 分支命名规范
- **功能开发分支**：`feature/功能描述` 或 `feature/issue-编号`
- **修复分支**：`fix/问题描述` 或 `fix/issue-编号`
- **文档更新分支**：`docs/更新内容`
- **基础设施分支**：`infra/配置名称`
- **重构分支**：`refactor/重构范围`

### 分支生命周期
- 分支应及时合并，避免长期存在
- 功能完成后及时删除已合并分支
- 定期同步 `main` 分支最新变更

## Pull Request 流程

### 提交要求
- **所有代码更改必须通过 Pull Request 提交**
- PR 标题应清晰描述变更内容
- 提供详细的 PR 描述，包括：
  - 变更目的和背景
  - 主要变更内容
  - 测试验证方法
  - 相关 issue 链接

### 自动化检查
- **所有 PR 必须通过自动化检查才能合并**
- 包括但不限于：
  - 代码风格检查（linting）
  - 文档与代码一致性验证
  - 安全扫描
  - 构建验证

### 代码审查
- **合并前必须至少有一名团队成员审核通过**
- 审查者应关注：
  - 代码质量和规范性
  - 功能正确性
  - 安全性考虑
  - 文档完整性
- 鼓励建设性的反馈和讨论

### 合并策略
- 优先使用 "Squash and merge" 保持提交历史整洁
- 重要的多步骤功能可使用 "Create a merge commit"
- 避免使用 "Rebase and merge" 除非必要

## 协作约定

### 代码组织
- 保持模块化设计，单一职责原则
- 新增功能优先考虑复用现有组件
- 重要的业务逻辑添加单元测试
- API 接口变更需要更新相应文档

### 文档维护
- **代码变更必须同步更新相关文档**
- 重要功能需要提供使用示例
- API 文档使用 OpenAPI/Swagger 规范
- 架构变更需要更新系统设计文档

### 文件管理
- **定期清理自动生成的文件，避免仓库冗余**
- 生成的代码文件应添加到 `.gitignore`
- 临时文件和日志文件不应提交到仓库
- 大型二进制文件考虑使用 Git LFS

### 版本管理
- 遵循语义化版本控制（Semantic Versioning）
- 重大更新需要提供迁移指南
- 保持 CHANGELOG.md 文件更新
- 标记重要的发布节点

### 安全规范
- 绝不提交敏感信息（密码、密钥、令牌）
- 配置文件使用环境变量或密钥管理
- 定期更新依赖包以修复安全漏洞
- 生产环境配置与开发环境严格分离

### 性能考虑
- 关注代码性能影响，避免不必要的资源消耗
- 数据库查询使用适当的索引
- 前端资源进行合理的懒加载和缓存
- 监控关键性能指标

## 特殊说明

### 多语言支持
- 系统设计考虑国际化需求
- 用户界面文本使用 i18n 方案
- 错误信息和日志保持英文，便于调试

### 部署流程
- 遵循基础设施即代码（IaC）原则
- Kubernetes 配置文件统一管理
- 生产环境变更需要逐步部署验证
- 保持回滚方案的可用性

### 监控和日志
- 重要操作添加结构化日志
- 使用统一的日志格式和级别
- 关键业务指标需要监控告警
- 错误处理包含足够的上下文信息

## 开发工具推荐

### IDE 配置
- 推荐使用 VS Code 或 PyCharm
- 安装相应的代码格式化插件
- 启用自动保存和格式化功能

### 有用的命令
```bash
# 代码格式化
black . --line-length 88
isort . --profile black

# 代码检查
flake8 .
pylint **/*.py

# 前端开发
npm run lint
npm run format
```

---

*最后更新：2024年8月*

*本文档将根据项目发展持续完善，如有建议请通过 issue 或 PR 提出。*